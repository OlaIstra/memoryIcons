"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,s=Array(e.length);t<e.length;t++)s[t]=e[t];return s}return Array.from(e)}var card=document.getElementsByClassName("card"),cards=[].concat(_toConsumableArray(card)),deck=document.getElementById("card-deck"),moves=0,counter=document.querySelector(".moves"),stars=document.querySelectorAll(".fa-star"),matchedCard=document.getElementsByClassName("match"),starsList=document.querySelectorAll(".stars li"),closeicon=document.querySelector(".close"),modal=document.getElementById("popup1"),restart=document.querySelector("#restart");restart.onmouseenter=restart.classList.add("animated"),restart.onmouseenter=restart.classList.add("shake");var openedCards=[];function shuffle(e){for(var t,s,a=e.length;0!==a;)s=Math.floor(Math.random()*a),t=e[a-=1],e[a]=e[s],e[s]=t;return e}function startGame(){console.log("start"),cards=shuffle(cards);for(var e=0;e<cards.length;e++)deck.innerHTML="",[].forEach.call(cards,function(e){deck.appendChild(e)}),cards[e].classList.remove("show","open","match","disabled");moves=0,counter.innerHTML=moves;for(e=0;e<stars.length;e++)stars[e].style.color="#FFD700",stars[e].style.visibility="visible";minute=second=0,hour=0,document.querySelector(".timer").innerHTML="0 mins 0 secs",clearInterval(interval)}document.body.onload=startGame();var displayCard=function(){this.classList.toggle("open"),this.classList.toggle("show"),this.classList.toggle("disabled")};function cardOpen(){openedCards.push(this),2===openedCards.length&&(moveCounter(),openedCards[0].type===openedCards[1].type?matched():unmatched())}function matched(){openedCards[0].classList.add("match","disabled"),openedCards[1].classList.add("match","disabled"),openedCards[0].classList.remove("show","open","no-event"),openedCards[1].classList.remove("show","open","no-event"),openedCards=[]}function unmatched(){openedCards[0].classList.add("unmatched"),openedCards[1].classList.add("unmatched"),disable(),setTimeout(function(){openedCards[0].classList.remove("show","open","no-event","unmatched"),openedCards[1].classList.remove("show","open","no-event","unmatched"),enable(),openedCards=[]},1100)}function disable(){Array.prototype.filter.call(cards,function(e){e.classList.add("disabled")})}function enable(){Array.prototype.filter.call(cards,function(e){e.classList.remove("disabled");for(var t=0;t<matchedCard.length;t++)matchedCard[t].classList.add("disabled")})}function moveCounter(){if(moves++,1==(counter.innerHTML=moves)&&(minute=second=0,hour=0,startTimer()),8<moves&&moves<12)for(i=0;i<3;i++)1<i&&(stars[i].style.visibility="collapse");else if(13<moves)for(i=0;i<3;i++)0<i&&(stars[i].style.visibility="collapse")}var second=0,minute=0;hour=0;var interval,timer=document.querySelector(".timer");function startTimer(){interval=setInterval(function(){timer.innerHTML=minute+"mins "+second+"secs",60==++second&&(minute++,second=0),60==minute&&(hour++,minute=0)},1e3)}function congratulations(){if(16==matchedCard.length){clearInterval(interval),finalTime=timer.innerHTML,modal.classList.add("show");var e=document.querySelector(".stars").innerHTML;document.getElementById("finalMove").innerHTML=moves,document.getElementById("starRating").innerHTML=e,document.getElementById("totalTime").innerHTML=finalTime,closeModal()}}function closeModal(){closeicon.addEventListener("click",function(e){modal.classList.remove("show"),startGame()})}function playAgain(){modal.classList.remove("show"),startGame()}for(var i=0;i<cards.length;i++)(card=cards[i]).addEventListener("click",displayCard),card.addEventListener("click",cardOpen),card.addEventListener("click",congratulations);